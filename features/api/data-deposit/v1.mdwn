[[!toc levels=3]]

## DVN Data Deposit API v1 examples using curl

Please note that this is all subject to change! https://github.com/IQSS/dvn/tree/develop/tools/scripts/data-deposit-api contains the latest working example code.

### Retrieve SWORD service document

    curl --insecure -s https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/service-document

### Create a study

    curl --insecure -s --data-binary "@atom-entry-study.xml" -H "Content-Type: application/atom+xml" https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/collection/dataverse/sword

### Deposit data into a study

    curl --include --insecure -s --upload-file example.zip -H "Content-Disposition: filename=example.zip" -H "Content-Type: application/zip" -H "Packaging: http://purl.org/net/sword/package/SimpleZip" https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/edit-media/study/hdl:TEST/12345

### List studies in a dataverse

    curl --insecure -s https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/collection/dataverse/sword

### Display a study atom entry (contains data citation (bibliographicCitation) statement uri, isReleased state, and isInDraft state)

    curl --insecure -s https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/edit/study/hdl:TEST/12345

### Display a study statement (contains feed of file entries)

    curl --insecure -s https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/statement/study/hdl:TEST/12345

### Delete a study (non-released studies only)

    curl -i --insecure -s -X DELETE https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/edit/study/hdl:TEST/12345

### Deaccession a study (released studies only)

    curl -i --insecure -s -X DELETE https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/edit/study/hdl:TEST/12345

### Replacing cataloging information (title, author, etc.) for a study

    curl --insecure -s --upload-file "atom-entry-study2.xml" -H "Content-Type: application/atom+xml" https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/edit/study/hdl:TEST/12345

### Add files to a study with a zip file

    curl --insecure -s --data-binary @another.zip -H "Content-Disposition: filename=another.zip" -H "Content-Type: application/zip" -H "Packaging: http://purl.org/net/sword/package/SimpleZip" https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/edit-media/study/hdl:TEST/12345

### Delete a file by database id

    curl --include --insecure -s -X DELETE https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/edit-media/file/2325541

### Release a study

    curl --insecure -s -X POST -H "In-Progress: false" --upload-file zero-length-file.txt https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/edit/study/hdl:TEST/12345

### Determine if a dataverse has been released (dataverseHasBeenReleased boolean)

    curl --insecure -s https://sword:sword@localhost:8181/dvn/api/data-deposit/v1/swordv2/collection/dataverse/sword

## curl reference

### --upload-file is a PUT

"If this is used on an HTTP(S) server, the PUT command will be used." -- http://curl.haxx.se/docs/manpage.html 

### --data-binary is a POST

"(HTTP) This posts data" -- http://curl.haxx.se/docs/manpage.html

## DVN Data Deposit API v1 client written in Python

https://github.com/dvn/swordpoc/tree/master/dvn_client
